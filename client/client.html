<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<script src="/socket.io/socket.io.js"></script>
	<script>
	var socket, canvas, ctx;
	var user = 'user' + (Math.floor((Math.random()*1000)) + 1);
	var cDraws = {};

		function init(){
			canvas = document.querySelector('canvas');
			ctx = canvas.getContext("2d");
			socket = io.connect();
			canvas.addEventListener("onmouseover", mouseOver, false);
			canvas.addEventListener("onmouseout", mouseOut, false);
			start(socket);
		}

			function mouseOver(e){
				var x = event.x;
				var y = event.y;
				var data = {u:user, x:x, y:y};
				socket.emit('clientMouseOnStream', data);
			}

			function mouseOut(e){
				socket.emit('clientMouseOffStream', data);
			}

			function start(socket){
				socket.on('draw', function(data){
					draw(data.d1, "rgba(255,255,255,0.5)");
					draw(data.d2.Bubble, "rgba(255,0,0,0.5)");
				});
			}

	function draw(data, dColor){
		if(data)

		ctx.clearRect(0, 0, canvas.width, canvas.height);

		for(var i = 0; i < data.length; i++){
			var tempCircle = data[i];
			console.log(tempCircle);
			ctx.save();
			ctx.beginPath();
			ctx.fillStyle = dColor;
			ctx.arc(tempCircle.position.x,
					tempCircle.position.y,
					tempCircle.radius,
					0, Math.PI * 2,
					false);
			ctx.closePath();
			ctx.fill();
			ctx.restore();
		}
	}

	window.onload = init;
	</script>
	<style>
		html,body{
			margin:0;
			background-color: #FFF;
		}
		canvas{
			display:block;
			position:absolute;
			resize: both;
			top: 50%; bottom: 0; right: 0; left: 0;
			transform: translateY(-50%);
			margin-left: auto;
			margin-right: auto;
			background-color: #000;
		}
	</style>
</head>
<body>
	<canvas id="canvas" width="500" height="500"></canvas>
</body>
</html>
